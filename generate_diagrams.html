<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSmart ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        h2 {
            color: #555;
            border-bottom: 2px solid #007acc;
            padding-bottom: 10px;
            margin-top: 40px;
        }
        .diagram {
            margin: 30px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background: #fafafa;
        }
        .download-btn {
            background: #007acc;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px 5px;
            font-size: 14px;
        }
        .download-btn:hover {
            background: #005a9e;
        }
        .description {
            background: #e8f4fd;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸš€ CSmart ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨</h1>
        
        <div class="description">
            <strong>ğŸ“‹ ì‚¬ìš©ë²•:</strong> ê° ë‹¤ì´ì–´ê·¸ë¨ì„ í´ë¦­í•˜ì—¬ í™•ëŒ€í•˜ê³ , ìš°í´ë¦­ìœ¼ë¡œ ì´ë¯¸ì§€ë¥¼ ì €ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        </div>

        <h2>1. ì „ì²´ ì‹œìŠ¤í…œ êµ¬ì¡°</h2>
        <div class="diagram">
            <div class="mermaid" id="diagram1">
graph TD
    A[ì‚¬ìš©ì ì§ˆë¬¸] --> B{ì§ˆë¬¸ ë³µì¡ë„ íŒë³„}
    
    B -->|ê°„ë‹¨í•œ ì§ˆë¬¸| C[íŒŒì¸íŠœë‹ ëª¨ë¸]
    B -->|ë³µì¡í•œ ì§ˆë¬¸| D[LangGraph ì—ì´ì „íŠ¸]
    
    C --> C1[CSmart-FAQ API í˜¸ì¶œ]
    C1 --> C2[Gemma 2B íŒŒì¸íŠœë‹ ëª¨ë¸]
    C2 --> C3[ì›ì‹œ ë‹µë³€ ìƒì„±]
    C3 --> C4[LLM ì¬ê°€ê³µ]
    C4 --> C5[ì¬ê°€ê³µëœ ë‹µë³€]
    C5 --> C6{ë‹µë³€ í’ˆì§ˆ í‰ê°€}
    
    C6 -->|í’ˆì§ˆ ì–‘í˜¸ 6ì  ì´ìƒ| C7[ì¬ê°€ê³µëœ ë‹µë³€ ë°˜í™˜]
    C6 -->|í’ˆì§ˆ ë¯¸ë‹¬ 6ì  ë¯¸ë§Œ| C8[LangGraphë¡œ ì¬ë¼ìš°íŒ…]
    
    C8 --> D
    D --> D1[í†µí•© ì—ì´ì „íŠ¸]
    D1 --> D2{ë°ì´í„° ì†ŒìŠ¤ ì„ íƒ}
    
    D2 -->|GuidelineDB| E[ê°€ì´ë“œë¼ì¸ ì—ì´ì „íŠ¸]
    D2 -->|Web Search| F[ì›¹ ê²€ìƒ‰ ì—ì´ì „íŠ¸]
    
    E --> E1[í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰]
    E1 --> E2[í‚¤ì›Œë“œ ë§¤ì¹­]
    E1 --> E3[ë²¡í„° ìœ ì‚¬ë„]
    E2 --> E4[Chroma DB]
    E3 --> E4
    E4 --> E5[ë¬¸ì„œ ê²€ìƒ‰]
    E5 --> E6[ë‹µë³€ ìƒì„±]
    
    F --> F1[Tavily API]
    F1 --> F2[ì›¹ ê²€ìƒ‰]
    F2 --> F3[ê²€ìƒ‰ ê²°ê³¼]
    F3 --> F4[ë‹µë³€ ìƒì„±]
    
    E6 --> G[ìµœì¢… ë‹µë³€]
    F4 --> G
    C5 --> G
    
    G --> H[ì‚¬ìš©ìì—ê²Œ ì‘ë‹µ]
    
    style A fill:#e1f5fe
    style B fill:#fff3e0
    style C fill:#e8f5e8
    style C4 fill:#fff3e0
    style C6 fill:#ffebee
    style D fill:#f3e5f5
    style G fill:#fff9c4
    style H fill:#e1f5fe
            </div>
            <button class="download-btn" onclick="downloadDiagram('diagram1', 'ì „ì²´ì‹œìŠ¤í…œêµ¬ì¡°')">ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ</button>
        </div>

        <h2>2. ë¼ìš°íŒ… ë¡œì§ ìƒì„¸</h2>
        <div class="diagram">
            <div class="mermaid" id="diagram2">
flowchart TD
    A[ì§ˆë¬¸ ì…ë ¥] --> B{ìˆ˜ë™ì„ íƒ ì—¬ë¶€}
    B -->|Yes| B1{ì–´ë–¤ ëª¨ë¸?}
    B1 -->|íŒŒì¸íŠœë‹ ëª¨ë¸| C[íŒŒì¸íŠœë‹ ëª¨ë¸ í˜¸ì¶œ]
    B1 -->|LangGraph ì—ì´ì „íŠ¸| D[LangGraph ì—ì´ì „íŠ¸ í˜¸ì¶œ]
    
    B -->|No| E[ì§ˆë¬¸ ë³µì¡ë„ íŒë³„]
    E --> F{ì§ˆë¬¸ ë¶„ì„}
    F -->|ì¼ë°˜ì ì¸ í•™ìŠµ ì¡°ì–¸| G[Simple ë¶„ë¥˜]
    F -->|íŠ¹ì • ëŒ€í•™/ì¼ì • ì •ë³´| H[Complex ë¶„ë¥˜]
    
    G --> C
    H --> D
    
    C --> C1[íŒŒì¸íŠœë‹ ëª¨ë¸ ì›ì‹œ ë‹µë³€]
    C1 --> C2[LLM ì¬ê°€ê³µ]
    C2 --> C3[ì¬ê°€ê³µëœ ë‹µë³€]
    C3 --> C4{ë‹µë³€ í’ˆì§ˆ í‰ê°€}
    C4 -->|6ì  ì´ìƒ| C5[ì¬ê°€ê³µëœ ë‹µë³€ ë°˜í™˜]
    C4 -->|6ì  ë¯¸ë§Œ| C6[LangGraphë¡œ ì¬ë¼ìš°íŒ…]
    C6 --> D
    
    D --> J[ê²€ìƒ‰ ê¸°ë°˜ ë‹µë³€ ìƒì„±]
    
    C5 --> K[ìµœì¢… ë‹µë³€]
    J --> K
            </div>
            <button class="download-btn" onclick="downloadDiagram('diagram2', 'ë¼ìš°íŒ…ë¡œì§')">ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ</button>
        </div>

        <h2>3. ë°ì´í„° íë¦„ë„</h2>
        <div class="diagram">
            <div class="mermaid" id="diagram3">
sequenceDiagram
    participant U as ì‚¬ìš©ì
    participant API as API Layer
    participant R as Router
    participant F as íŒŒì¸íŠœë‹ ëª¨ë¸
    participant RF as ë‹µë³€ ì¬ê°€ê³µ
    participant E as ë‹µë³€ í’ˆì§ˆ í‰ê°€
    participant L as LangGraph
    participant DB as Chroma DB
    participant W as Web Search
    
    U->>API: ì§ˆë¬¸ ì…ë ¥
    API->>R: ì§ˆë¬¸ ë³µì¡ë„ íŒë³„
    R->>R: LLMìœ¼ë¡œ ë¶„ì„
    
    alt ê°„ë‹¨í•œ ì§ˆë¬¸
        R->>F: CSmart-FAQ API í˜¸ì¶œ
        F->>F: Gemma 2B ëª¨ë¸ ì²˜ë¦¬
        F->>R: ì›ì‹œ ë‹µë³€ ë°˜í™˜
        R->>RF: ë‹µë³€ ì¬ê°€ê³µ ìš”ì²­
        RF->>RF: LLMìœ¼ë¡œ ë‹µë³€ ê°œì„ 
        RF->>R: ì¬ê°€ê³µëœ ë‹µë³€ ë°˜í™˜
        R->>E: ë‹µë³€ í’ˆì§ˆ í‰ê°€ ìš”ì²­
        E->>E: LLMìœ¼ë¡œ í’ˆì§ˆ ë¶„ì„ (1-10ì )
        
        alt í’ˆì§ˆ ì–‘í˜¸ (6ì  ì´ìƒ)
            E->>R: í’ˆì§ˆ ì–‘í˜¸ íŒì •
            R->>API: ì¬ê°€ê³µëœ ë‹µë³€ ì „ë‹¬
        else í’ˆì§ˆ ë¯¸ë‹¬ (6ì  ë¯¸ë§Œ)
            E->>R: í’ˆì§ˆ ë¯¸ë‹¬ íŒì •
            R->>L: LangGraphë¡œ ì¬ë¼ìš°íŒ…
            L->>DB: í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰
            L->>W: ì›¹ ê²€ìƒ‰ (í•„ìš”ì‹œ)
            DB->>L: ê´€ë ¨ ë¬¸ì„œ ë°˜í™˜
            W->>L: ì›¹ ê²€ìƒ‰ ê²°ê³¼
            L->>L: ë‹µë³€ ìƒì„±
            L->>R: ìƒì„±ëœ ë‹µë³€
            R->>API: LangGraph ë‹µë³€ ì „ë‹¬
        end
    else ë³µì¡í•œ ì§ˆë¬¸
        R->>L: LangGraph ì—ì´ì „íŠ¸ ì‹¤í–‰
        L->>DB: í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰
        L->>W: ì›¹ ê²€ìƒ‰ (í•„ìš”ì‹œ)
        DB->>L: ê´€ë ¨ ë¬¸ì„œ ë°˜í™˜
        W->>L: ì›¹ ê²€ìƒ‰ ê²°ê³¼
        L->>L: ë‹µë³€ ìƒì„±
        L->>R: ìƒì„±ëœ ë‹µë³€
        R->>API: ë‹µë³€ ì „ë‹¬
    end
    
    API->>U: ìµœì¢… ë‹µë³€ ë°˜í™˜
            </div>
            <button class="download-btn" onclick="downloadDiagram('diagram3', 'ë°ì´í„°íë¦„ë„')">ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ</button>
        </div>

        <h2>4. ì»´í¬ë„ŒíŠ¸ë³„ ìƒì„¸ êµ¬ì¡°</h2>
        <div class="diagram">
            <div class="mermaid" id="diagram4">
graph LR
    subgraph "API Layer"
        A1[get_answer í•¨ìˆ˜]
        A2[ì§ˆë¬¸ ë³µì¡ë„ íŒë³„]
        A3[íŒŒì¸íŠœë‹ ëª¨ë¸ í˜¸ì¶œ]
        A4[ë‹µë³€ ì¬ê°€ê³µ]
        A5[ë‹µë³€ í’ˆì§ˆ í‰ê°€]
    end
    
    subgraph "íŒŒì¸íŠœë‹ ëª¨ë¸"
        F1[CSmart-FAQ API]
        F2[Gemma 2B ëª¨ë¸]
        F3[ë‹µë³€ ìƒì„±]
    end
    
    subgraph "LangGraph ì‹œìŠ¤í…œ"
        L1[í†µí•© ì—ì´ì „íŠ¸]
        L2[ê°€ì´ë“œë¼ì¸ ì—ì´ì „íŠ¸]
        L3[ì›¹ ê²€ìƒ‰ ì—ì´ì „íŠ¸]
    end
    
    subgraph "ë°ì´í„° ì†ŒìŠ¤"
        D1[Chroma DB]
        D2[Tavily API]
        D3[Google Gemini]
    end
    
    A1 --> A2
    A1 --> A3
    A1 --> A4
    A1 --> A5
    A2 --> L1
    A3 --> F1
    A4 --> A5
    A5 --> L1
    F1 --> F2
    F2 --> F3
    L1 --> L2
    L1 --> L3
    L2 --> D1
    L3 --> D2
    D1 --> D3
            </div>
            <button class="download-btn" onclick="downloadDiagram('diagram4', 'ì»´í¬ë„ŒíŠ¸êµ¬ì¡°')">ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ</button>
        </div>

        <h2>5. ë‹µë³€ ì²˜ë¦¬ ë°©ì‹ ë¹„êµ</h2>
        <div class="diagram">
            <div class="mermaid" id="diagram5">
graph TD
    A[ì§ˆë¬¸ ì…ë ¥] --> B{ì§ˆë¬¸ ìœ í˜•}
    
    B -->|ê°„ë‹¨í•œ ì§ˆë¬¸| C[íŒŒì¸íŠœë‹ ëª¨ë¸]
    B -->|ë³µì¡í•œ ì§ˆë¬¸| D[LangGraph ì—ì´ì „íŠ¸]
    
    C --> C1[API í˜¸ì¶œ]
    C1 --> C2[ëª¨ë¸ ì²˜ë¦¬]
    C2 --> C3[ì›ì‹œ ë‹µë³€ ìƒì„±]
    C3 --> C4[LLM ì¬ê°€ê³µ]
    C4 --> C5[ì¬ê°€ê³µëœ ë‹µë³€]
    C5 --> C6{ë‹µë³€ í’ˆì§ˆ í‰ê°€}
    C6 -->|6ì  ì´ìƒ| C7[ì¬ê°€ê³µëœ ë‹µë³€ ë°˜í™˜]
    C6 -->|6ì  ë¯¸ë§Œ| C8[LangGraphë¡œ ì¬ë¼ìš°íŒ…]
    C8 --> D
    
    D --> D1[ë°ì´í„° ê²€ìƒ‰]
    D1 --> D2[ë¬¸ì„œ ë¶„ì„]
    D2 --> D3[ë‹µë³€ ìƒì„±]
    D3 --> D4[ê²€ìƒ‰ ê¸°ë°˜ ë‹µë³€]
    
    C7 --> E[ìµœì¢… ë‹µë³€]
    D4 --> E
    
    style C4 fill:#fff3e0
    style C6 fill:#ffebee
    style D4 fill:#e8f5e8
            </div>
            <button class="download-btn" onclick="downloadDiagram('diagram5', 'ë‹µë³€ì²˜ë¦¬ë°©ì‹')">ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ</button>
        </div>

        <div class="description">
            <strong>ğŸ’¡ íŒ:</strong> 
            <ul>
                <li>ê° ë‹¤ì´ì–´ê·¸ë¨ì„ í´ë¦­í•˜ë©´ í™•ëŒ€/ì¶•ì†Œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
                <li>ìš°í´ë¦­ â†’ "ì´ë¯¸ì§€ë¡œ ì €ì¥"ì„ ì„ íƒí•˜ì—¬ ë‹¤ì´ì–´ê·¸ë¨ì„ ì €ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
                <li>ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ê³ í•´ìƒë„ ì´ë¯¸ì§€ë¡œ ì €ì¥ë©ë‹ˆë‹¤.</li>
            </ul>
        </div>
    </div>

    <script>
        // Mermaid ì´ˆê¸°í™”
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true
            },
            sequence: {
                useMaxWidth: true
            }
        });

        // ë‹¤ì´ì–´ê·¸ë¨ ë‹¤ìš´ë¡œë“œ í•¨ìˆ˜
        function downloadDiagram(diagramId, filename) {
            const element = document.getElementById(diagramId);
            const svg = element.querySelector('svg');
            
            if (svg) {
                // SVGë¥¼ Canvasë¡œ ë³€í™˜
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                
                // SVG í¬ê¸° ê°€ì ¸ì˜¤ê¸°
                const svgRect = svg.getBoundingClientRect();
                canvas.width = svgRect.width * 2; // ê³ í•´ìƒë„
                canvas.height = svgRect.height * 2;
                
                // SVGë¥¼ ì´ë¯¸ì§€ë¡œ ë³€í™˜
                const svgData = new XMLSerializer().serializeToString(svg);
                const img = new Image();
                
                img.onload = function() {
                    ctx.scale(2, 2); // ê³ í•´ìƒë„
                    ctx.drawImage(img, 0, 0);
                    
                    // PNGë¡œ ë‹¤ìš´ë¡œë“œ
                    canvas.toBlob(function(blob) {
                        const url = URL.createObjectURL(blob);
                        const a = document.createElement('a');
                        a.href = url;
                        a.download = `CSmart_${filename}_${new Date().toISOString().slice(0,10)}.png`;
                        document.body.appendChild(a);
                        a.click();
                        document.body.removeChild(a);
                        URL.revokeObjectURL(url);
                    });
                };
                
                img.src = 'data:image/svg+xml;base64,' + btoa(unescape(encodeURIComponent(svgData)));
            }
        }

        // í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ í›„ ë‹¤ì´ì–´ê·¸ë¨ ë Œë”ë§
        window.addEventListener('load', function() {
            mermaid.init();
        });
    </script>
</body>
</html>
